¥8
SC:\Users\akaxb\source\repos\MicroServices\User.API\Controllers\AppUserController.cs
	namespace 	
User
 
. 
API 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
AppUserController "
:# $

Controller% /
{ 
private 
readonly 
IRepository $
<$ %
AppUser% ,
,, -
int. 1
>1 2
_repository3 >
;> ?
public 
AppUserController  
(  !
IRepository! ,
<, -
AppUser- 4
,4 5
int6 9
>9 :

repository; E
)E F
{ 	
_repository 
= 

repository $
;$ %
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Get) ,
(, -
)- .
{ 	
var 
result 
= 
await 
_repository *
.* +
	FindAsync+ 4
(4 5
)5 6
;6 7
return 
new 

JsonResult !
(! "
result" (
)( )
;) *
} 	
[!! 	
HttpGet!!	 
(!! 
$str!! 
)!! 
]!! 
public"" 
async"" 
Task"" 
<"" 
IActionResult"" '
>""' (
Get"") ,
("", -
int""- 0
id""1 3
)""3 4
{## 	
var$$ 
user$$ 
=$$ 
await$$ 
_repository$$ (
.$$( )
FindByIdAsync$$) 6
($$6 7
id$$7 9
)$$9 :
;$$: ;
if%% 
(%% 
user%% 
==%% 
null%% 
)%% 
{&& 
return'' 
NotFound'' 
(''  
)''  !
;''! "
}(( 
return)) 
Ok)) 
()) 
user)) 
))) 
;)) 
}** 	
[-- 	
HttpPost--	 
]-- 
public.. 
async.. 
Task.. 
<.. 
IActionResult.. '
>..' (
Post..) -
(..- .
[... /
FromBody../ 7
]..7 8
AppUser..8 ?
appUser..@ G
)..G H
{// 	
if00 
(00 
!00 

ModelState00 
.00 
IsValid00 #
)00# $
{11 
return22 

BadRequest22 !
(22! "
)22" #
;22# $
}33 
var44 
user44 
=44 
await44 
_repository44 (
.44( )
	FindAsync44) 2
(442 3
a443 4
=>445 7
a448 9
.449 :
Name44: >
==44? A
appUser44B I
.44I J
Name44J N
||44O Q
a44R S
.44S T
Phone44T Y
==44Z \
appUser44] d
.44d e
Phone44e j
)44j k
;44k l
if55 
(55 
user55 
.55 
Count55 
(55 
)55 
==55 
$num55  !
)55! "
{66 
throw77 
new77 !
UserFriendlyException77 /
(77/ 0
$str770 N
)77N O
;77O P
}88 
int99 
id99 
=99 
await99 
_repository99 &
.99& '
CreateAsync99' 2
(992 3
appUser993 :
)99: ;
;99; <
return:: 
Ok:: 
(:: 
id:: 
):: 
;:: 
};; 	
[>> 	
HttpPut>>	 
(>> 
$str>> 
)>> 
]>> 
public?? 
async?? 
Task?? 
Put?? 
(?? 
int?? !
id??" $
,??$ %
[??& '
FromBody??' /
]??/ 0
AppUser??0 7
appUser??8 ?
)??? @
{@@ 	
varAA 
userAA 
=AA 
awaitAA 
_repositoryAA (
.AA( )
	FindAsyncAA) 2
(AA2 3
aAA3 4
=>AA5 7
aAA8 9
.AA9 :
IdAA: <
!=AA= ?
appUserAA@ G
.AAG H
IdAAH J
&&AAK M
(AAN O
aAAO P
.AAP Q
NameAAQ U
==AAV X
appUserAAY `
.AA` a
NameAAa e
||AAf h
aAAi j
.AAj k
PhoneAAk p
==AAq s
appUserAAt {
.AA{ |
Phone	AA| Å
)
AAÅ Ç
)
AAÇ É
;
AAÉ Ñ
ifBB 
(BB 
userBB 
.BB 
CountBB 
(BB 
)BB 
==BB 
$numBB  !
)BB! "
{CC 
throwDD 
newDD !
UserFriendlyExceptionDD /
(DD/ 0
$strDD0 N
)DDN O
;DDO P
}EE 
awaitFF 
_repositoryFF 
.FF 
UpdateAsyncFF )
(FF) *
appUserFF* 1
)FF1 2
;FF2 3
}GG 	
[JJ 	

HttpDeleteJJ	 
(JJ 
$strJJ 
)JJ 
]JJ 
[KK 	
	AuthorizeKK	 
]KK 
publicLL 
asyncLL 
TaskLL 
DeleteLL  
(LL  !
intLL! $
idLL% '
)LL' (
{MM 	
awaitNN 
_repositoryNN 
.NN 
DeleteAsyncNN )
(NN) *
idNN* ,
)NN, -
;NN- .
}OO 	
[QQ 	
RouteQQ	 
(QQ 
$strQQ  
)QQ  !
]QQ! "
[RR 	
HttpPostRR	 
]RR 
publicSS 
asyncSS 
TaskSS 
<SS 
IActionResultSS '
>SS' (
CheckOrCreateSS) 6
(SS6 7
stringSS7 =
phoneSS> C
)SSC D
{TT 	
varVV 
userVV 
=VV 
awaitVV 
_repositoryVV (
.VV( )
SingleAsyncVV) 4
(VV4 5
aVV5 6
=>VV7 9
aVV: ;
.VV; <
PhoneVV< A
==VVB D
phoneVVE J
)VVJ K
;VVK L
ifWW 
(WW 
userWW 
==WW 
nullWW 
)WW 
{XX 
userYY 
=YY 
newYY 
AppUserYY "
{YY# $
PhoneZZ 
=ZZ 
phoneZZ 
}[[ 
;[[ 
await\\ 
_repository\\ !
.\\! "
CreateAsync\\" -
(\\- .
user\\. 2
)\\2 3
;\\3 4
}]] 
return^^ 
Ok^^ 
(^^ 
user^^ 
.^^ 
Id^^ 
)^^ 
;^^ 
}__ 	
}`` 
}aa „
PC:\Users\akaxb\source\repos\MicroServices\User.API\Controllers\BaseController.cs
	namespace 	
User
 
. 
API 
. 
Controllers 
{ 
public		 

class		 
BaseController		 
:		  !

Controller		" ,
{

 
} 
} Á
WC:\Users\akaxb\source\repos\MicroServices\User.API\Controllers\HealthCheckController.cs
	namespace		 	
User		
 
.		 
API		 
.		 
Controllers		 
{

 
[ 
Route 

(
 
$str 
) 
] 
public 

class !
HealthCheckController &
:' (

Controller) 3
{ 
[ 	
HttpGet	 
( 
$str 
) 
] 
[ 	
HttpHead	 
( 
$str 
) 
] 
public 
IActionResult 
Ping !
(! "
)" #
{ 	
return 
Ok 
( 
) 
; 
} 	
} 
} ‡%
OC:\Users\akaxb\source\repos\MicroServices\User.API\Controllers\JwtController.cs
	namespace 	
User
 
. 
API 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
JwtController 
:  

Controller! +
{ 
private 
readonly 
IRepository $
<$ %
AppUser% ,
,, -
int. 1
>1 2
_repository3 >
;> ?
private 
readonly 
JwtSettings $
_jwtSettings% 1
;1 2
public 
JwtController 
( 
IRepository (
<( )
AppUser) 0
,0 1
int2 5
>5 6

repository7 A
,A B
IOptionsC K
<K L
JwtSettingsL W
>W X
jwtSettingsAccessorY l
)l m
{ 	
_repository 
= 

repository $
;$ %
_jwtSettings 
= 
jwtSettingsAccessor .
.. /
Value/ 4
;4 5
} 	
[   	
HttpPost  	 
(   
$str   
)   
]   
public!! 
async!! 
Task!! 
<!! 
IActionResult!! '
>!!' (
	MakeToken!!) 2
(!!2 3
[!!3 4
FromBody!!4 <
]!!< =
LoginViewModel!!= K
login!!L Q
)!!Q R
{"" 	
if## 
(## 
!## 

ModelState## 
.## 
IsValid## #
)### $
{$$ 
return%% 

BadRequest%% !
(%%! "
)%%" #
;%%# $
}&& 
var'' 
user'' 
='' 
await'' 
_repository'' (
.''( )
SingleAsync'') 4
(''4 5
a''5 6
=>''7 9
a'': ;
.''; <
Name''< @
==''A C
login''D I
.''I J
UserName''J R
&&''S U
a''V W
.''W X
Phone''X ]
==''^ `
login''a f
.''f g
Phone''g l
)''l m
;''m n
if(( 
((( 
user(( 
==(( 
null(( 
)(( 
{)) 
return** 

BadRequest** !
(**! "
)**" #
;**# $
}++ 
var,, 
claims,, 
=,, 
new,, 
Claim,, "
[,," #
],,# $
{,,% &
new-- 
Claim-- 
(-- 

ClaimTypes-- $
.--$ %
Name--% )
,--) *
user--* .
.--. /
Name--/ 3
)--3 4
,--4 5
new.. 
Claim.. 
(.. 
$str.. !
,..! "
user.." &
...& '
Phone..' ,
).., -
,..- .
new// 
Claim// 
(// 

ClaimTypes// $
.//$ %
Role//% )
,//) *
$str//* 1
)//1 2
}00 
;00 
var22 
key22 
=22 
new22  
SymmetricSecurityKey22 .
(22. /
Encoding22/ 7
.227 8
UTF8228 <
.22< =
GetBytes22= E
(22E F
_jwtSettings22F R
.22R S
	SecretKey22S \
)22\ ]
)22] ^
;22^ _
var33 
creds33 
=33 
new33 
SigningCredentials33 .
(33. /
key33/ 2
,332 3
SecurityAlgorithms334 F
.33F G

HmacSha25633G Q
)33Q R
;33R S
var44 
jwtToken44 
=44 
new44 
JwtSecurityToken44 /
(44/ 0
_jwtSettings440 <
.44< =
Issuer44= C
,44C D
_jwtSettings44E Q
.44Q R
Audience44R Z
,44Z [
claims44\ b
,44b c
DateTime44d l
.44l m
Now44m p
,44p q
DateTime44r z
.44z {
Now44{ ~
.44~ 

AddMinutes	44 â
(
44â ä
$num
44ä å
)
44å ç
,
44ç é
creds
44è î
)
44î ï
;
44ï ñ
return55 
Ok55 
(55 
new55 
{55 
token55 !
=55" #
new55$ '#
JwtSecurityTokenHandler55( ?
(55? @
)55@ A
.55A B

WriteToken55B L
(55L M
jwtToken55M U
)55U V
}55W X
)55X Y
;55Y Z
}66 	
}77 
}88 ì
MC:\Users\akaxb\source\repos\MicroServices\User.API\Data\AppUserContextSeed.cs
	namespace 	
User
 
. 
API 
. 
Data 
{ 
public 

class 
AppUserContextSeed #
{ 
public 
static 
async 
Task  
	SeedAsync! *
(* +
IApplicationBuilder+ >
builder? F
,F G
ILoggerFactoryG U
loggerFactoryV c
)c d
{ 	
var 
_logger 
= 
loggerFactory '
.' (
CreateLogger( 4
<4 5
AppUserContextSeed5 G
>G H
(H I
)I J
;J K
try 
{ 
using 
( 
var 
scope  
=! "
builder# *
.* +
ApplicationServices+ >
.> ?
CreateScope? J
(J K
)K L
)L M
{ 
var 
context 
=  !
scope" '
.' (
ServiceProvider( 7
.7 8
GetRequiredService8 J
<J K
	MyContextK T
>T U
(U V
)V W
;W X
context 
. 
Database $
.$ %
Migrate% ,
(, -
)- .
;. /
if 
( 
! 
context  
.  !
AppUsers! )
.) *
Any* -
(- .
). /
)/ 0
{ 
var 
user  
=! "
new# &
AppUser' .
{ 
Name  
=! "
$str# )
,) *
Phone !
=" #
$str$ 1
} 
; 
await 
context %
.% &
AppUsers& .
.. /
AddAsync/ 7
(7 8
user8 <
)< =
;= >
await   
context   %
.  % &
SaveChangesAsync  & 6
(  6 7
)  7 8
;  8 9
_logger!! 
.!!  
LogInformation!!  .
(!!. /
$str!!/ B
)!!B C
;!!C D
}"" 
}## 
}$$ 
catch%% 
(%% 
	Exception%% 
ex%% 
)%%  
{&& 
_logger'' 
.'' 
LogError''  
(''  !
ex''! #
.''# $
Message''$ +
)''+ ,
;'', -
}(( 
})) 	
}** 
}++ ∂
dC:\Users\akaxb\source\repos\MicroServices\User.API\Data\EntityConfigurations\AppUserConfiguration.cs
	namespace		 	
User		
 
.		 
API		 
.		 
Data		 
.		  
EntityConfigurations		 ,
{

 
public 

class  
AppUserConfiguration %
:& '$
IEntityTypeConfiguration( @
<@ A
AppUserA H
>H I
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
AppUser0 7
>7 8
builder9 @
)@ A
{ 	
builder 
. 
ToTable 
( 
$" 
sys !
{! "
nameof" (
(( )
AppUser) 0
)0 1
}1 2
s2 3
"3 4
)4 5
;5 6
builder 
. 
HasKey 
( 
a 
=> 
a  !
.! "
Id" $
)$ %
;% &
builder 
. 
Property 
( 
a 
=> !
a" #
.# $
Name$ (
)( )
.) *
HasMaxLength* 6
(6 7
$num7 :
): ;
;; <
builder 
. 
Property 
( 
a 
=> !
a" #
.# $
Company$ +
)+ ,
., -
HasMaxLength- 9
(9 :
$num: =
)= >
;> ?
builder 
. 
Property 
( 
a 
=> !
a" #
.# $
Avatar$ *
)* +
.+ ,
HasMaxLength, 8
(8 9
$num9 <
)< =
;= >
} 	
} 
} Á
iC:\Users\akaxb\source\repos\MicroServices\User.API\Data\EntityConfigurations\UserPropertyConfiguration.cs
	namespace		 	
User		
 
.		 
API		 
.		 
Data		 
.		  
EntityConfigurations		 ,
{

 
public 

class %
UserPropertyConfiguration *
:+ ,$
IEntityTypeConfiguration- E
<E F
UserPropertyF R
>R S
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
UserProperty0 <
>< =
builder> E
)E F
{ 	
builder 
. 
ToTable 
( 
$str .
). /
;/ 0
builder 
. 
HasKey 
( 
a 
=> 
new  #
{$ %
a& '
.' (
	AppUserId( 1
,1 2
a3 4
.4 5
Value5 :
,: ;
a< =
.= >
Key> A
}B C
)C D
;D E
builder 
. 
Property 
( 
a 
=> !
a" #
.# $
Text$ (
)( )
.) *
HasMaxLength* 6
(6 7
$num7 :
): ;
;; <
builder 
. 
Property 
( 
a 
=> !
a" #
.# $
Key$ '
)' (
.( )
HasMaxLength) 5
(5 6
$num6 8
)8 9
;9 :
builder 
. 
Property 
( 
a 
=> !
a" #
.# $
Value$ )
)) *
.* +
HasMaxLength+ 7
(7 8
$num8 :
): ;
;; <
} 	
} 
} ¯
DC:\Users\akaxb\source\repos\MicroServices\User.API\Data\MyContext.cs
	namespace		 	
User		
 
.		 
API		 
.		 
Data		 
{

 
public 

class 
	MyContext 
: 
	DbContext &
{ 
public 
	MyContext 
( 
DbContextOptions )
<) *
	MyContext* 3
>3 4
options5 <
)< =
:> ?
base@ D
(D E
optionsE L
)L M
{ 	
} 	
public 
DbSet 
< 
AppUser 
> 
AppUsers &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 
UserProperty !
>! "
UserProperties# 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, / 
AppUserConfiguration0 D
(D E
)E F
)F G
;G H
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, /%
UserPropertyConfiguration0 I
(I J
)J K
)K L
;L M
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
} 	
} 
} 
HC:\Users\akaxb\source\repos\MicroServices\User.API\Dtos\ConsulOptions.cs
	namespace 	
User
 
. 
API 
. 
Dtos 
{ 
public 

class 
ConsulOptions 
{		 
public

 
string

 
HttpEndpoint

 "
{

# $
get

% (
;

( )
set

* -
;

- .
}

/ 0
public 
DnsEndpoint 
DnsEndpoint &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} —
FC:\Users\akaxb\source\repos\MicroServices\User.API\Dtos\DnsEndpoint.cs
	namespace 	
User
 
. 
API 
. 
Dtos 
{ 
public		 

class		 
DnsEndpoint		 
{

 
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
Port 
{ 
get 
; 
set "
;" #
}$ %
public 

IPEndPoint 
ToIPEndPoint &
(& '
)' (
{ 	
return 
new 

IPEndPoint !
(! "
	IPAddress" +
.+ ,
Parse, 1
(1 2
Address2 9
)9 :
,: ;
Port< @
)@ A
;A B
} 	
} 
} Ä
RC:\Users\akaxb\source\repos\MicroServices\User.API\Dtos\ServiceDiscoveryOptions.cs
	namespace 	
User
 
. 
API 
. 
Dtos 
{ 
public 

class #
ServiceDiscoveryOptions (
{		 
public

 
string

 
ServiceName

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
ConsulOptions 
Consul #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} ¡
SC:\Users\akaxb\source\repos\MicroServices\User.API\Filters\GlobalExceptionFilter.cs
	namespace

 	
User


 
.

 
API

 
.

 
Filters

 
{ 
public 

class !
GlobalExceptionFilter &
:' (
IExceptionFilter) 9
{ 
private 
readonly 
ILogger  
<  !!
GlobalExceptionFilter! 6
>6 7
_logger8 ?
;? @
private 
readonly 
IHostingEnvironment ,
_env- 1
;1 2
public !
GlobalExceptionFilter $
($ %
ILogger% ,
<, -!
GlobalExceptionFilter- B
>B C
loggerD J
, 
IHostingEnvironment !
env" %
)% &
{ 	
_logger 
= 
logger 
; 
_env 
= 
env 
; 
} 	
public 
void 
OnException 
(  
ExceptionContext  0
context1 8
)8 9
{ 	
var 
json 
= 
new 
JsonErrorResponse ,
(, -
)- .
;. /
if 
( 
context 
. 
	Exception !
.! "
GetType" )
() *
)* +
==, .
typeof/ 5
(5 6!
UserFriendlyException6 K
)K L
)L M
{ 
json 
. 
Message 
= 
context &
.& '
	Exception' 0
.0 1
Message1 8
;8 9
context   
.   
Result   
=    
new  ! $"
BadRequestObjectResult  % ;
(  ; <
json  < @
)  @ A
;  A B
}!! 
else"" 
{## 
json$$ 
.$$ 
Message$$ 
=$$ 
$str$$ +
;$$+ ,
if%% 
(%% 
_env%% 
.%% 
IsDevelopment%% &
(%%& '
)%%' (
)%%( )
{&& 
json'' 
.'' 
DeveloperMessage'' )
=''* +
context'', 3
.''3 4
	Exception''4 =
.''= >

StackTrace''> H
;''H I
}(( 
context)) 
.)) 
Result)) 
=))  
new))! $+
InternalServerErrorObjectResult))% D
())D E
json))E I
)))I J
;))J K
}** 
_logger++ 
.++ 
LogError++ 
(++ 
context++ $
.++$ %
	Exception++% .
,++. /
context++0 7
.++7 8
	Exception++8 A
.++A B
Message++B I
)++I J
;++J K
context,, 
.,, 
ExceptionHandled,, $
=,,% &
true,,' +
;,,+ ,
}-- 	
}.. 
}// —
UC:\Users\akaxb\source\repos\MicroServices\User.API\InternalServerErrorObjectResult.cs
	namespace 	
User
 
. 
API 
{		 
public

 

class

 +
InternalServerErrorObjectResult

 0
:

1 2
ObjectResult

3 ?
{ 
public +
InternalServerErrorObjectResult .
(. /
object/ 5
value6 ;
); <
:= >
base? C
(C D
valueD I
)I J
{ 	

StatusCode 
= 
StatusCodes $
.$ %(
Status500InternalServerError% A
;A B
} 	
} 
} Õ
GC:\Users\akaxb\source\repos\MicroServices\User.API\JsonErrorResponse.cs
	namespace 	
User
 
. 
API 
{ 
public 

class 
JsonErrorResponse "
{		 
public

 
string

 
Message

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 
string 
DeveloperMessage &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} ç
KC:\Users\akaxb\source\repos\MicroServices\User.API\Jwt\JwtAuthConfigurer.cs
	namespace 	
User
 
. 
API 
. 
Jwt 
{ 
public 

class 
JwtAuthConfigurer "
{ 
public 
static 
void 
	Configure $
($ %
IServiceCollection% 7
services8 @
,@ A
IConfigurationB P
ConfigurationQ ^
)^ _
{ 	
services 
. 
	Configure 
< 
JwtSettings *
>* +
(+ ,
Configuration, 9
.9 :

GetSection: D
(D E
$strE R
)R S
)S T
;T U
var 
jwtSettings 
= 
new !
JwtSettings" -
(- .
). /
;/ 0
Configuration 
. 
Bind 
( 
$str ,
,, -
jwtSettings. 9
)9 :
;: ;
services 
. 
AddAuthentication &
(& '
options' .
=>/ 1
{ 
options 
. %
DefaultAuthenticateScheme 1
=2 3
JwtBearerDefaults4 E
.E F 
AuthenticationSchemeF Z
;Z [
options 
. "
DefaultChallengeScheme .
=/ 0
JwtBearerDefaults1 B
.B C 
AuthenticationSchemeC W
;W X
} 
) 
. 
AddJwtBearer 
( 
options #
=>$ &
{ 
options 
. %
TokenValidationParameters 1
=2 3
new4 7%
TokenValidationParameters8 Q
{ 
ValidIssuer 
=  !
jwtSettings" -
.- .
Issuer. 4
,4 5
ValidAudience !
=" #
jwtSettings$ /
./ 0
Audience0 8
,8 9
IssuerSigningKey $
=% &
new' * 
SymmetricSecurityKey+ ?
(? @
Encoding@ H
.H I
UTF8I M
.M N
GetBytesN V
(V W
jwtSettingsW b
.b c
	SecretKeyc l
)l m
)m n
} 
; 
}   
)   
;   
}!! 	
}"" 
}## Ÿ
EC:\Users\akaxb\source\repos\MicroServices\User.API\Jwt\JwtSettings.cs
	namespace 	
User
 
. 
API 
{ 
public 

class 
JwtSettings 
{		 
public

 
string

 
Issuer

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
string 
Audience 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
	SecretKey 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} Ω/
ZC:\Users\akaxb\source\repos\MicroServices\User.API\Migrations\20180329063903_add_tables.cs
	namespace 	
User
 
. 
API 
. 

Migrations 
{ 
public 

partial 
class 

add_tables #
:$ %
	Migration& /
{		 
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ G
,G H,
 SqlServerValueGenerationStrategyI i
.i j
IdentityColumnj x
)x y
,y z
Avatar 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
	maxLength2 ;
:; <
$num= @
,@ A
nullableB J
:J K
trueL P
)P Q
,Q R
Company 
= 
table #
.# $
Column$ *
<* +
string+ 1
>1 2
(2 3
	maxLength3 <
:< =
$num> A
,A B
nullableC K
:K L
trueM Q
)Q R
,R S
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
	maxLength0 9
:9 :
$num; >
,> ?
nullable@ H
:H I
trueJ N
)N O
,O P
Phone 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
nullable1 9
:9 :
true; ?
)? @
,@ A
Title 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
nullable1 9
:9 :
true; ?
)? @
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str (
,( )
columns 
: 
table 
=> !
new" %
{   
	AppUserId!! 
=!! 
table!!  %
.!!% &
Column!!& ,
<!!, -
int!!- 0
>!!0 1
(!!1 2
nullable!!2 :
:!!: ;
false!!< A
)!!A B
,!!B C
Value"" 
="" 
table"" !
.""! "
Column""" (
<""( )
string"") /
>""/ 0
(""0 1
	maxLength""1 :
:"": ;
$num""< >
,""> ?
nullable""@ H
:""H I
false""J O
)""O P
,""P Q
Key## 
=## 
table## 
.##  
Column##  &
<##& '
string##' -
>##- .
(##. /
	maxLength##/ 8
:##8 9
$num##: <
,##< =
nullable##> F
:##F G
false##H M
)##M N
,##N O
Text$$ 
=$$ 
table$$  
.$$  !
Column$$! '
<$$' (
string$$( .
>$$. /
($$/ 0
	maxLength$$0 9
:$$9 :
$num$$; >
,$$> ?
nullable$$@ H
:$$H I
true$$J N
)$$N O
}%% 
,%% 
constraints&& 
:&& 
table&& "
=>&&# %
{'' 
table(( 
.(( 

PrimaryKey(( $
((($ %
$str((% :
,((: ;
x((< =
=>((> @
new((A D
{((E F
x((G H
.((H I
	AppUserId((I R
,((R S
x((T U
.((U V
Value((V [
,(([ \
x((] ^
.((^ _
Key((_ b
}((c d
)((d e
;((e f
table)) 
.)) 

ForeignKey)) $
())$ %
name** 
:** 
$str** I
,**I J
column++ 
:++ 
x++  !
=>++" $
x++% &
.++& '
	AppUserId++' 0
,++0 1
principalTable,, &
:,,& '
$str,,( 5
,,,5 6
principalColumn-- '
:--' (
$str--) -
,--- .
onDelete..  
:..  !
ReferentialAction.." 3
...3 4
Cascade..4 ;
)..; <
;..< =
}// 
)// 
;// 
}00 	
	protected22 
override22 
void22 
Down22  $
(22$ %
MigrationBuilder22% 5
migrationBuilder226 F
)22F G
{33 	
migrationBuilder44 
.44 
	DropTable44 &
(44& '
name55 
:55 
$str55 (
)55( )
;55) *
migrationBuilder77 
.77 
	DropTable77 &
(77& '
name88 
:88 
$str88 #
)88# $
;88$ %
}99 	
}:: 
};; ´
DC:\Users\akaxb\source\repos\MicroServices\User.API\Models\AppUser.cs
	namespace 	
User
 
. 
API 
. 
Models 
{		 
public

 

class

 
AppUser

 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
InvalidNameCheck	 
( 
$str !
)! "
]" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Company 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Phone	 
] 
public 
string 
Phone 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Avatar 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< 
UserProperty  
>  !
UserProperties" 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
} 
}   ê
IC:\Users\akaxb\source\repos\MicroServices\User.API\Models\UserProperty.cs
	namespace 	
User
 
. 
API 
. 
Models 
{ 
public 

class 
UserProperty 
{		 
public

 
int

 
	AppUserId

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
string 
Key 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Text 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Value 
{ 
get !
;! "
set# &
;& '
}( )
} 
} “
DC:\Users\akaxb\source\repos\MicroServices\User.API\Models\UserTag.cs
	namespace 	
User
 
. 
API 
. 
Models 
{ 
public 

class 
UserTag 
{		 
public

 
int

 
UserId

 
{

 
get

 
;

  
set

! $
;

$ %
}

& '
public 
string 
Tag 
{ 
get 
;  
set! $
;$ %
}& '
} 
} ›
kC:\Users\akaxb\source\repos\MicroServices\User.API\Models\ValidationAttributes\InvalidNameCheckAttribute.cs
	namespace 	
User
 
. 
API 
. 
Models 
.  
ValidationAttributes .
{ 
public 

class %
InvalidNameCheckAttribute *
:+ ,
ValidationAttribute- @
{ 
public 
string 

_errorName  
{! "
get# &
;& '
private( /
set0 3
;3 4
}5 6
public %
InvalidNameCheckAttribute (
(( )
string) /
	errorName0 9
)9 :
{ 	

_errorName 
= 
	errorName "
;" #
} 	
	protected 
override 
ValidationResult +
IsValid, 3
(3 4
object4 :
value; @
,@ A
ValidationContextB S
validationContextT e
)e f
{ 	
if 
( 
value 
? 
. 
ToString 
(  
)  !
==! #

_errorName# -
)- .
{ 
return 
new 
ValidationResult +
(+ ,
$", .
{. /
value/ 4
?4 5
.5 6
ToString6 >
(> ?
)? @
}@ A
 can not be useA P
"P Q
)Q R
;R S
} 
return 
ValidationResult #
.# $
Success$ +
;+ ,
} 	
} 
} Å
VC:\Users\akaxb\source\repos\MicroServices\User.API\Models\ViewModels\LoginViewModel.cs
	namespace 	
User
 
. 
API 
. 
Models 
. 

ViewModels $
{ 
public		 

class		 
LoginViewModel		 
{

 
[ 	
Required	 
] 
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
string 
Phone 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ∏	
=C:\Users\akaxb\source\repos\MicroServices\User.API\Program.cs
	namespace 	
User
 
. 
API 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
BuildWebHost 
( 
args 
) 
. 
Run "
(" #
)# $
;$ %
} 	
public 
static 
IWebHost 
BuildWebHost +
(+ ,
string, 2
[2 3
]3 4
args5 9
)9 :
=>; =
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
. 
UseUrls 
( 
$str 0
)0 1
. 
Build 
( 
) 
; 
} 
} ‰0
TC:\Users\akaxb\source\repos\MicroServices\User.API\Repositories\AppUserRepository.cs
	namespace		 	
User		
 
.		 
API		 
.		 
Repositories		 
{

 
public 

class 
AppUserRepository "
:# $
IRepository% 0
<0 1
AppUser1 8
,8 9
int: =
>= >
{ 
private 
readonly 
	MyContext "
_context# +
;+ ,
public 
AppUserRepository  
(  !
	MyContext! *
context+ 2
)2 3
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
int 
> 
CreateAsync *
(* +
AppUser+ 2
entity3 9
)9 :
{ 	
await 
_context 
. 
AddAsync #
(# $
entity$ *
)* +
;+ ,
await 
_context 
. 
SaveChangesAsync +
(+ ,
), -
;- .
return 
entity 
. 
Id 
; 
} 	
public 
async 
Task 
DeleteAsync %
(% &
int& )
id* ,
), -
{ 	
var 
appUser 
= 
_context "
." #
AppUsers# +
.+ ,
FirstOrDefault, :
(: ;
a; <
=>= ?
a@ A
.A B
IdB D
==E G
idH J
)J K
;K L
if 
( 
appUser 
!= 
null 
)  
{ 
await   
Task   
.   
Run   
(   
(    
)    !
=>  " $
{  % &
_context  ' /
.  / 0
AppUsers  0 8
.  8 9
Remove  9 ?
(  ? @
appUser  @ G
)  G H
;  H I
}  J K
)  K L
;  L M
}!! 
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
IEnumerable$$ %
<$$% &
AppUser$$& -
>$$- .
>$$. /
	FindAsync$$0 9
($$9 :

Expression$$: D
<$$D E
Func$$E I
<$$I J
AppUser$$J Q
,$$Q R
bool$$S W
>$$W X
>$$X Y

expression$$Z d
=$$d e
null$$e i
)$$i j
{%% 	
return&& 
await&& 
Task&& 
.&& 

FromResult&& (
(&&( )

GetAllList&&) 3
(&&3 4
)&&4 5
.&&5 6
ToList&&6 <
(&&< =
)&&= >
)&&> ?
;&&? @
}'' 	
public)) 

IQueryable)) 
<)) 
AppUser)) !
>))! "

GetAllList))# -
())- .

Expression)). 8
<))8 9
Func))9 =
<))= >
AppUser))> E
,))E F
bool))G K
>))K L
>))L M
	predicate))N W
=))X Y
null))Z ^
)))^ _
{** 	
if++ 
(++ 
	predicate++ 
==++ 
null++ !
)++! "
{,, 
return-- 
_context-- 
.--  
AppUsers--  (
;--( )
}.. 
return// 
_context// 
.// 
AppUsers// $
.//$ %
Where//% *
(//* +
	predicate//+ 4
)//4 5
;//5 6
}00 	
public33 
async33 
Task33 
<33 
AppUser33 !
>33! "
FindByIdAsync33# 0
(330 1
int331 4
id335 7
)337 8
{44 	
var55 
appUser55 
=55 
_context55 "
.55" #
AppUsers55# +
.55+ ,
FirstOrDefault55, :
(55: ;
a55; <
=>55= ?
a55@ A
.55A B
Id55B D
==55E G
id55H J
)55J K
;55K L
return66 
await66 
Task66 
.66 

FromResult66 (
(66( )
appUser66) 0
)660 1
;661 2
}77 	
public99 
async99 
Task99 
UpdateAsync99 %
(99% &
AppUser99& -
entity99. 4
)994 5
{:: 	
var;; 
oriUser;; 
=;; 
_context;; "
.;;" #
AppUsers;;# +
.;;+ ,
Single;;, 2
(;;2 3
x;;3 4
=>;;5 7
x;;8 9
.;;9 :
Id;;: <
==;;= ?
entity;;@ F
.;;F G
Id;;G I
);;I J
;;;J K
_context<< 
.<< 
Entry<< 
(<< 
oriUser<< "
)<<" #
.<<# $
CurrentValues<<$ 1
.<<1 2
	SetValues<<2 ;
(<<; <
entity<<< B
)<<B C
;<<C D
await== 
_context== 
.== 
SaveChangesAsync== +
(==+ ,
)==, -
;==- .
}>> 	
public@@ 
async@@ 
Task@@ 
<@@ 
AppUser@@ !
>@@! "
SingleAsync@@# .
(@@. /

Expression@@/ 9
<@@9 :
Func@@: >
<@@> ?
AppUser@@? F
,@@F G
bool@@H L
>@@L M
>@@M N

expression@@O Y
=@@Z [
null@@\ `
)@@` a
{AA 	
varBB 
appUserBB 
=BB 
_contextBB "
.BB" #
AppUsersBB# +
.BB+ ,
FirstOrDefaultBB, :
(BB: ;

expressionBB; E
)BBE F
;BBF G
returnCC 
awaitCC 
TaskCC 
.CC 

FromResultCC (
(CC( )
appUserCC) 0
)CC0 1
;CC1 2
}DD 	
}EE 
}FF é
NC:\Users\akaxb\source\repos\MicroServices\User.API\Repositories\IRepository.cs
	namespace 	
User
 
. 
API 
. 
Repositories 
{ 
public		 

	interface		 
IRepository		  
<		  !
TEntity		! (
,		( )
TKey		* .
>		. /
where

	 
TEntity

 
:

 
class

 
{ 
Task 
< 
TKey 
> 
CreateAsync 
( 
TEntity &
entity' -
)- .
;. /
Task 
UpdateAsync 
( 
TEntity  
entity! '
)' (
;( )
Task 
DeleteAsync 
( 
TKey 
id  
)  !
;! "
Task 
< 
TEntity 
> 
FindByIdAsync #
(# $
TKey$ (
id) +
)+ ,
;, -
Task 
< 
TEntity 
> 
SingleAsync !
(! "

Expression" ,
<, -
Func- 1
<1 2
TEntity2 9
,9 :
bool; ?
>? @
>@ A

expressionB L
=M N
nullO S
)S T
;T U

IQueryable 
< 
TEntity 
> 

GetAllList &
(& '

Expression' 1
<1 2
Func2 6
<6 7
TEntity7 >
,> ?
bool@ D
>D E
>E F
	predicateG P
=Q R
nullS W
)W X
;X Y
Task 
< 
IEnumerable 
< 
TEntity  
>  !
>! "
	FindAsync# ,
(, -

Expression- 7
<7 8
Func8 <
<< =
TEntity= D
,D E
boolF J
>J K
>K L

expressionM W
=W X
nullX \
)\ ]
;] ^
} 
} êS
=C:\Users\akaxb\source\repos\MicroServices\User.API\Startup.cs
	namespace 	
User
 
. 
API 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration   
=   
configuration   )
;  ) *
}!! 	
public## 
IConfiguration## 
Configuration## +
{##, -
get##. 1
;##1 2
}##3 4
public&& 
void&& 
ConfigureServices&& %
(&&% &
IServiceCollection&&& 8
services&&9 A
)&&A B
{'' 	
services)) 
.)) 
AddDbContext)) !
<))! "
	MyContext))" +
>))+ ,
()), -
options))- 4
=>))5 7
{** 
options++ 
.++ 
UseSqlServer++ (
(++( )
Configuration++) 6
.++6 7
GetConnectionString++7 J
(++J K
$str++K T
)++T U
)++U V
;++V W
},, 
),, 
;,, 
services.. 
... 
AddMvc.. 
(.. 
options.. #
=>..$ &
{// 
options00 
.00 
Filters00 
.00  
Add00  #
<00# $!
GlobalExceptionFilter00$ 9
>009 :
(00: ;
)00; <
;00< =
}11 
)11 
;11 
services33 
.33 
AddSwaggerGen33 "
(33" #
c33# $
=>33% '
{44 
c55 
.55 

SwaggerDoc55 
(55 
$str55 !
,55! "
new55# &
Info55' +
{55, -
Title55. 3
=554 5
$str556 C
,55C D
Version55E L
=55M N
$str55O S
}55T U
)55U V
;55V W
}66 
)66 
;66 
if88 
(88 
bool88 
.88 
Parse88 
(88 
Configuration88 (
[88( )
$str88) F
]88F G
)88G H
)88H I
{99 
JwtAuthConfigurer:: !
.::! "
	Configure::" +
(::+ ,
services::, 4
,::4 5
Configuration::6 C
)::C D
;::D E
};; 
services>> 
.>> 
	AddScoped>> 
<>> 
IRepository>> *
<>>* +
AppUser>>+ 2
,>>2 3
int>>4 7
>>>7 8
,>>8 9
AppUserRepository>>: K
>>>K L
(>>L M
)>>M N
;>>N O
servicesAA 
.AA 
	ConfigureAA 
<AA #
ServiceDiscoveryOptionsAA 6
>AA6 7
(AA7 8
ConfigurationAA8 E
.AAE F

GetSectionAAF P
(AAP Q
$strAAQ c
)AAc d
)AAd e
;AAe f
servicesBB 
.BB 
AddSingletonBB !
<BB! "
IConsulClientBB" /
>BB/ 0
(BB0 1
pBB1 2
=>BB3 5
newBB6 9
ConsulClientBB: F
(BBF G
cfgBBG J
=>BBK M
{CC 
varDD  
serviceConfigurationDD (
=DD) *
pDD+ ,
.DD, -
GetRequiredServiceDD- ?
<DD? @
IOptionsDD@ H
<DDH I#
ServiceDiscoveryOptionsDDI `
>DD` a
>DDa b
(DDb c
)DDc d
.DDd e
ValueDDe j
;DDj k
ifEE 
(EE 
!EE 
stringEE 
.EE 
IsNullOrEmptyEE )
(EE) * 
serviceConfigurationEE* >
.EE> ?
ConsulEE? E
.EEE F
HttpEndpointEEF R
)EER S
)EES T
{FF 
cfgHH 
.HH 
AddressHH 
=HH  !
newHH" %
UriHH& )
(HH) * 
serviceConfigurationHH* >
.HH> ?
ConsulHH? E
.HHE F
HttpEndpointHHF R
)HHR S
;HHS T
}II 
}JJ 
)JJ 
)JJ 
;JJ 
}KK 	
publicNN 
voidNN 
	ConfigureNN 
(NN 
IApplicationBuilderNN 1
appNN2 5
,NN5 6
ILoggerFactoryNN7 E
loggerFactoryNNF S
,NNS T
IHostingEnvironmentNNU h
envNNi l
,NNl m 
IApplicationLifetimeOO  
applicationLifetimeOO! 4
,OO4 5
IOptionsPP 
<PP #
ServiceDiscoveryOptionsPP ,
>PP, -
serviceOptionsPP. <
,PP< =
IConsulClientQQ 
consulQQ  
)QQ  !
{RR 	
ifSS 
(SS 
envSS 
.SS 
IsDevelopmentSS !
(SS! "
)SS" #
)SS# $
{TT 
appUU 
.UU %
UseDeveloperExceptionPageUU -
(UU- .
)UU. /
;UU/ 0
}VV 
appXX 
.XX 

UseSwaggerXX 
(XX 
)XX 
;XX 
app[[ 
.[[ 
UseSwaggerUI[[ 
([[ 
c[[ 
=>[[ !
{\\ 
c]] 
.]] 
SwaggerEndpoint]] !
(]]! "
$str]]" <
,]]< =
$str]]> N
)]]N O
;]]O P
}^^ 
)^^ 
;^^ 
app__ 
.__ 
UseAuthentication__ !
(__! "
)__" #
;__# $
app`` 
.`` 
UseMvc`` 
(`` 
)`` 
;`` 
applicationLifetimeaa 
.aa  
ApplicationStartedaa  2
.aa2 3
Registeraa3 ;
(aa; <
(aa< =
)aa= >
=>aa? A
{bb 
RegisterServicecc 
(cc  
appcc  #
,cc# $
serviceOptionscc% 3
,cc3 4
consulcc5 ;
,cc; <
applicationLifetimecc= P
)ccP Q
;ccQ R
}dd 
)dd 
;dd 
AppUserContextSeedee 
.ee 
	SeedAsyncee (
(ee( )
appee) ,
,ee, -
loggerFactoryee. ;
)ee; <
.ee< =
Waitee= A
(eeA B
)eeB C
;eeC D
}ff 	
privatehh 
voidhh 
RegisterServicehh $
(hh$ %
IApplicationBuilderhh% 8
apphh9 <
,hh< =
IOptionsii 
<ii #
ServiceDiscoveryOptionsii ,
>ii, -
serviceOptionsii. <
,ii< =
IConsulClientjj 
consuljj  
,jj  ! 
IApplicationLifetimekk  
appLifekk! (
)kk( )
{ll 	
varmm 
featuresmm 
=mm 
appmm 
.mm 

Propertiesmm )
[mm) *
$strmm* ;
]mm; <
asmm= ?
FeatureCollectionmm@ Q
;mmQ R
varnn 
	addressesnn 
=nn 
featuresnn $
.nn$ %
Getnn% (
<nn( )#
IServerAddressesFeaturenn) @
>nn@ A
(nnA B
)nnB C
.oo 
	Addressesoo 
.pp 
Selectpp 
(pp 
ppp 
=>pp 
newpp  
Uripp! $
(pp$ %
ppp% &
)pp& '
)pp' (
;pp( )
foreachrr 
(rr 
varrr 
addressrr  
inrr! #
	addressesrr$ -
)rr- .
{ss 
vartt 
	serviceIdtt 
=tt 
$"tt  "
{tt" #
serviceOptionstt# 1
.tt1 2
Valuett2 7
.tt7 8
ServiceNamett8 C
}ttC D
_ttD E
{ttE F
addressttF M
.ttM N
HostttN R
}ttR S
:ttS T
{ttT U
addressttU \
.tt\ ]
Porttt] a
}tta b
"ttb c
;ttc d
varvv 
	httpCheckvv 
=vv 
newvv  #
AgentServiceCheckvv$ 5
(vv5 6
)vv6 7
{ww *
DeregisterCriticalServiceAfterxx 2
=xx3 4
TimeSpanxx5 =
.xx= >
FromMinutesxx> I
(xxI J
$numxxJ K
)xxK L
,xxL M
Intervalyy 
=yy 
TimeSpanyy '
.yy' (
FromSecondsyy( 3
(yy3 4
$numyy4 6
)yy6 7
,yy7 8
HTTPzz 
=zz 
newzz 
Urizz "
(zz" #
addresszz# *
,zz* +
$strzz, 9
)zz9 :
.zz: ;
OriginalStringzz; I
}{{ 
;{{ 
var}} 
registration}}  
=}}! "
new}}# &$
AgentServiceRegistration}}' ?
(}}? @
)}}@ A
{~~ 
Checks 
= 
new  
[  !
]! "
{# $
	httpCheck% .
}/ 0
,0 1
Address
ÄÄ 
=
ÄÄ 
address
ÄÄ %
.
ÄÄ% &
Host
ÄÄ& *
,
ÄÄ* +
ID
ÅÅ 
=
ÅÅ 
	serviceId
ÅÅ "
,
ÅÅ" #
Name
ÇÇ 
=
ÇÇ 
serviceOptions
ÇÇ )
.
ÇÇ) *
Value
ÇÇ* /
.
ÇÇ/ 0
ServiceName
ÇÇ0 ;
,
ÇÇ; <
Port
ÉÉ 
=
ÉÉ 
address
ÉÉ "
.
ÉÉ" #
Port
ÉÉ# '
}
ÑÑ 
;
ÑÑ 
consul
ÖÖ 
.
ÖÖ 
Agent
ÖÖ 
.
ÖÖ 
ServiceRegister
ÖÖ ,
(
ÖÖ, -
registration
ÖÖ- 9
)
ÖÖ9 :
.
ÖÖ: ;

GetAwaiter
ÖÖ; E
(
ÖÖE F
)
ÖÖF G
.
ÖÖG H
	GetResult
ÖÖH Q
(
ÖÖQ R
)
ÖÖR S
;
ÖÖS T
appLife
ÜÜ 
.
ÜÜ !
ApplicationStopping
ÜÜ +
.
ÜÜ+ ,
Register
ÜÜ, 4
(
ÜÜ4 5
(
ÜÜ5 6
)
ÜÜ6 7
=>
ÜÜ8 :
{
áá 
consul
àà 
.
àà 
Agent
àà  
.
àà  !
ServiceDeregister
àà! 2
(
àà2 3
	serviceId
àà3 <
)
àà< =
.
àà= >

GetAwaiter
àà> H
(
ààH I
)
ààI J
.
ààJ K
	GetResult
ààK T
(
ààT U
)
ààU V
;
ààV W
}
ââ 
)
ââ 
;
ââ 
}
ää 
}
ãã 	
}
åå 
}çç Ú
KC:\Users\akaxb\source\repos\MicroServices\User.API\UserFriendlyException.cs
	namespace 	
User
 
. 
API 
{ 
public 

class !
UserFriendlyException &
:' (
	Exception) 2
{		 
public

 !
UserFriendlyException

 $
(

$ %
)

% &
{ 	
} 	
public !
UserFriendlyException $
($ %
string% +
message, 3
)3 4
:5 6
base7 ;
(; <
message< C
)C D
{ 	
} 	
public !
UserFriendlyException $
($ %
string% +
message, 3
,3 4
	Exception5 >
	exception? H
)H I
:J K
baseL P
(P Q
messageQ X
,X Y
	exceptionZ c
)c d
{ 	
} 	
} 
} 