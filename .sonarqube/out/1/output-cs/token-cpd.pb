×
@C:\Users\akaxb\source\repos\MicroServices\GateWay.API\Program.cs
	namespace 	
GateWay
 
. 
API 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
BuildWebHost 
( 
args 
) 
. 
Run "
(" #
)# $
;$ %
} 	
public 
static 
IWebHost 
BuildWebHost +
(+ ,
string, 2
[2 3
]3 4
args5 9
)9 :
=>; =
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
. %
ConfigureAppConfiguration &
(& '
(' (
hostingContext( 6
,6 7
builder7 >
)> ?
=>? A
{B C
builder 
. 
SetBasePath #
(# $
hostingContext$ 2
.2 3
HostingEnvironment3 E
.E F
ContentRootPathF U
)U V
. 
AddJsonFile 
( 
$str *
)* +
;+ ,
} 
) 
. 
UseUrls 
( 
$str .
). /
. 
Build 
( 
) 
; 
} 
} æ
@C:\Users\akaxb\source\repos\MicroServices\GateWay.API\Startup.cs
	namespace 	
GateWay
 
. 
API 
{ 
public 

class 
Startup 
{ 
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
var %
authenticationProviderKey )
=* +
$str, 3
;3 4
services 
. 
AddAuthentication &
(& '
)' (
. +
AddIdentityServerAuthentication 0
(0 1%
authenticationProviderKey1 J
,J K
optionsL S
=>T V
{ 
options 
. 
ApiName #
=$ %
$str& 3
;3 4
options 
. 
	ApiSecret %
=& '
$str( 2
;2 3
options 
. 
	Authority %
=& '
$str( ?
;? @
options 
. 
SupportedTokens +
=, -
IdentityServer4. =
.= >!
AccessTokenValidation> S
.S T
SupportedTokensT c
.c d
Bothd h
;h i
options 
.  
RequireHttpsMetadata 0
=1 2
false3 8
;8 9
} 
) 
; 
services 
. 
	AddOcelot 
( 
)  
;  !
} 	
public"" 
void"" 
	Configure"" 
("" 
IApplicationBuilder"" 1
app""2 5
,""5 6
IHostingEnvironment""7 J
env""K N
)""N O
{## 	
if$$ 
($$ 
env$$ 
.$$ 
IsDevelopment$$ !
($$! "
)$$" #
)$$# $
{%% 
app&& 
.&& %
UseDeveloperExceptionPage&& -
(&&- .
)&&. /
;&&/ 0
}'' 
app(( 
.(( 
	UseOcelot(( 
((( 
)(( 
;(( 
})) 	
}** 
}++ 